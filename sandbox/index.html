<!DOCTYPE html>
  <head>
    <meta charset="utf-8">
    <title>KineticJS sandbox</title>

    <script src="./require.js"></script>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>

    <!-- used for KineticJS container -->
    <div id="container"></div>

    <script type="text/javascript">
        require.config({
            paths: {
                kinetic: '../dist/kinetic-dev',
                lodash: 'lodash.custom',
            },
            shim:Â {
                kinetic: {
                    exports: 'Kinetic',
                },
            }
        })


        require(['kinetic','./widgetName/index','include/math/geometry','include/time/timekeeper'], function (Kinetic,Widget,GeoMath,TimeKeeper) {
            var stage = new Kinetic.Stage({
                container: 'container',
                width: window.innerWidth,
                height: window.innerHeight
            });

            var layer = new Kinetic.Layer({
                width: stage.getWidth(),
                height: stage.getHeight(),
            });

            stage.add(layer);

            var xc = new Kinetic.Text({
                fill: 'black'
            });
            var yc = new Kinetic.Text({
                fill: 'black',
                y: 20
            });

            var w = Widget.create({
                x: 500,
                y: 500
            });
            layer.add(xc);
            layer.add(yc);
            layer.add(w.node);
            w.placed();
            stage.draw();

            var t = TimeKeeper.create();
            t.registerObserver(function () {
                var p = GeoMath.Vector.create(Math.cos(t.time.getSeconds() / 60 * GeoMath.TAU),Math.sin(t.time.getSeconds() / 60 * GeoMath.TAU)).mulScalar(200);
                var middle = GeoMath.Vector.create({x:500,y:500});
                var result = middle.add(p);
                xc.setText(p.x);
                yc.setText(p.y);
                w.node.setPosition(result);
                stage.draw();
            });
        });
    </script>

  </body>
</html>
